<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>EIgameLOL webpage - News</title>

<link rel="stylesheet" href="style.css">
<link rel="icon" href="icon.png" type="image/png">
<link rel="icon" href="icon.ico" type="image/x-icon">

<!-- Firebase v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyxxxxx",
  authDomain: "eigamelol.firebaseapp.com",
  databaseURL: "https://eigame-fanarts-default-rtdb.firebaseio.com/",
  projectId: "eigamelol"
});
</script>
</head>

<body>

<div id="wrapper">

<div id="header">
  <img src="ui/banner.png" width="1001" height="170" alt="">
</div>

<div id="menu">
  <a href="index.html">Home</a> |
  <a href="about.html">About Us</a> |
  <a href="privacy.html">Privacy Policy</a> |
  <a href="safety.html">Safety</a> |
  <a href="info.html">Info</a>

  <form id="searchBox" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search news or fanarts...." required>
    <button type="submit">Go</button>
  </form>
</div>

<div id="img-menu">
  <a href="news.html"><img src="ui/news.png"></a>
  <a href="comics.html"><img src="ui/comics.png"></a>
  <a href="games.html"><img src="ui/games.png"></a>
  <a href="fanarts.html"><img src="ui/fanarts.png"></a>
  <a href="#"><img src="ui/gameart.png"></a>
</div>

<!-- MAIN -->
<div id="main">

  <div class="news-box">
    <div class="news-header">News</div>

    <div id="newsList"></div>

    <!-- PAGINATION -->
    <div id="pagination">
      <button id="prevBtn">Prev</button>
      <button id="nextBtn">Next</button>
    </div>

  </div>

</div>

<!-- FOOTER -->
<div id="footer">
  | <a href="index.html">Home</a> |
  <a href="about.html">About Us</a> |
  <a href="privacy.html">Privacy Policy</a> |
  <a href="safety.html">Safety</a> |
  <a href="info.html">Info</a> |<br>
  ©2026 ElgameLOL
</div>

<div id="zoom" onclick="closeZoom()">
  <img id="zoomImg">
</div>

</div>

<script>
const NEWS_PER_PAGE = 7;
let newsData = [];
let currentPage = 0;

const list = document.getElementById("newsList");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");

firebase.database().ref("news")
  .orderByChild("time")
  .once("value")
  .then(snap => {

    newsData = [];

    snap.forEach(child => {
      const d = child.val();
      d._key = child.key;
      newsData.push(d);
    });

    // เรียงใหม่: ล่าสุดขึ้นก่อน
    newsData.sort((a, b) => b.time - a.time);

    renderPage();
  });

function renderPage(){
  list.innerHTML = "";

  const start = currentPage * NEWS_PER_PAGE;
  const end = start + NEWS_PER_PAGE;

  newsData.slice(start, end).forEach(d => {
    const date = new Date(d.time).toLocaleDateString();

    list.innerHTML += `
      <div class="news-item">
        <div class="news-date">${date}</div>

        ${d.img ? `<img src="${d.img}" class="news-img" onclick="openZoom('${d.img}')">` : ""}

        <div class="news-text">
          <h3>${d.title || ""}</h3>
          <p>${d.desc || ""}</p>
        </div>

        <div class="clear"></div>
      </div>
    `;
  });

  // ปุ่ม
  prevBtn.disabled = currentPage === 0;
  nextBtn.disabled = end >= newsData.length;
}

prevBtn.onclick = () => {
  if(currentPage > 0){
    currentPage--;
    renderPage();
  }
};

nextBtn.onclick = () => {
  if((currentPage + 1) * NEWS_PER_PAGE < newsData.length){
    currentPage++;
    renderPage();
  }
};
</script>
<script>
function openZoom(src){
  const z = document.getElementById("zoom");
  const img = document.getElementById("zoomImg");
  img.src = src;
  z.style.display = "flex";
}

function closeZoom(){
  document.getElementById("zoom").style.display = "none";
}
</script>
</body>
</html>













