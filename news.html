<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>EIgameLOL webpage - News</title>

<link rel="stylesheet" href="style.css">
<link rel="icon" href="icon.png" type="image/png">
<link rel="icon" href="icon.ico" type="image/x-icon">

<!-- Firebase v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyxxxxx",
  authDomain: "eigamelol.firebaseapp.com",
  databaseURL: "https://eigamelol-default-rtdb.firebaseio.com",
  projectId: "eigamelol"
});
</script>
</head>

<body>

<div id="wrapper">

<div id="header">
  <img src="ui/banner.png" width="1001" height="219">
</div>

<div id="menu">
  <a href="index.html">Home</a> |
  <a href="about.html">About Us</a> |
  <a href="privacy.html">Privacy Policy</a> |
  <a href="safety.html">Safety</a> |
  <a href="info.html">Info</a>

  <form id="searchBox" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search" required>
    <button type="submit">Go</button>
  </form>
</div>

<div id="img-menu">
  <a href="news.html"><img src="ui/news.png"></a>
  <a href="comics.html"><img src="ui/comics.png"></a>
  <a href="games.html"><img src="ui/games.png"></a>
  <a href="fanarts.html"><img src="ui/fanarts.png"></a>
  <a href="#"><img src="ui/gameart.png"></a>
</div>

<!-- MAIN -->
<div id="main">

  <div class="news-box">
    <div class="news-header">News</div>

    <div id="newsList"></div>

    <!-- PAGINATION -->
    <div id="pagination">
      <button id="prevBtn">Prev</button>
      <button id="nextBtn">Next</button>
    </div>

  </div>

</div>

<!-- FOOTER -->
<div id="footer">
  | <a href="index.html">Home</a> |
  <a href="about.html">About Us</a> |
  <a href="privacy.html">Privacy Policy</a> |
  <a href="safety.html">Safety</a> |
  <a href="info.html">Info</a> |<br>
  Â©2026 ElgameLOL
</div>

</div>

<script>
var pageSize = 5;
var lastKey = null;
var firstKey = null;

function loadNews(direction){
  var ref = firebase.database().ref("news").orderByChild("time");

  if(direction === "next" && lastKey){
    ref = ref.startAfter(lastKey).limitToFirst(pageSize);
  } else if(direction === "prev" && firstKey){
    ref = ref.endBefore(firstKey).limitToLast(pageSize);
  } else {
    ref = ref.limitToFirst(pageSize);
  }

  ref.once("value", function(snapshot){
    var box = document.getElementById("newsList");
    box.innerHTML = "";

    var keys = [];

    snapshot.forEach(function(child){
      keys.push(child.key);
      var d = child.val();
      var date = new Date(d.time).toLocaleDateString();

      var html =
        '<div class="news-item">' +
          '<div class="news-date">' + date + '</div>' +
          (d.img ? '<img src="'+d.img+'" class="news-img">' : '') +
          '<div class="news-text">' +
            '<h3>'+d.title+'</h3>' +
            '<p>'+d.desc+'</p>' +
          '</div>' +
        '</div>';

      box.insertAdjacentHTML("afterbegin", html);
    });

    firstKey = keys[0];
    lastKey  = keys[keys.length - 1];
  });
}

loadNews();

document.getElementById("nextBtn").onclick = function(){
  loadNews("next");
};

document.getElementById("prevBtn").onclick = function(){
  loadNews("prev");
};
</script>

</body>
</html>



