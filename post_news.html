<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Post News (Admin)</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
firebase.initializeApp({
  apiKey: "API_KEY",
  authDomain: "eigame-fanarts.firebaseapp.com",
  databaseURL: "https://eigame-fanarts-default-rtdb.firebaseio.com",
  projectId: "eigame-fanarts"
});
</script>
</head>

<body>

<h2>ADMIN – Post News</h2>

<input id="pass" type="password">

<div id="panel" style="display:none;">
  <input id="title">
  <textarea id="desc"></textarea>
  <input type="file" id="imgInput">
  <button onclick="postNews()">POST</button>
</div>

<script>
/* ===== ADMIN CONFIG ===== */
var ADMIN_PASS = "24680369121"; // เปลี่ยนรหัสตรงนี้
var imgBase64 = "";

/* ===== PASSWORD CHECK ===== */
document.getElementById("pass").onkeyup = function () {
    if (this.value === ADMIN_PASS) {
        document.getElementById("panel").style.display = "block";
    }
};

/* ===== IMAGE UPLOAD ===== */
document.getElementById("imgInput").onchange = function (e) {
    var file = e.target.files[0];
    var reader = new FileReader();
    reader.onload = function () {
        imgBase64 = reader.result;
    };
    reader.readAsDataURL(file);
};

/* ===== POST NEWS ===== */
function postNews() {
    if (!title.value || !imgBase64) {
        alert("Title and image required!");
        return;
    }

    firebase.database().ref("news").push({
        title: title.value,
        desc: desc.value,
        img: imgBase64,
        time: Date.now()
    });

    alert("Posted!");
}
</script>

</body>
</html>
